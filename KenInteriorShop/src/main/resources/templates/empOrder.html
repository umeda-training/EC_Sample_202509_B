<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ja">
<head>
<meta charset="UTF-8">
<title>注文管理画面</title>
<link th:href="@{/css/common.css}" rel="stylesheet" type="text/css">
</head>
<body>
	<div id="wrapper">
		<!--共通ヘッダー読み込み-->
		<!--<header　th:insert="~{header :: header_area}"></header>-->
		<header>注文管理画面</header>
		<main>
			<div id="form-area">
				<form th:action="@{/empOrder}" th:object="${empOrderForm}" method="post">
					<!--検索欄-->
					<div class="form-row">
						<label for="orderId">注文ID</label>
						<input th:field="*{orderId}" th:value="${param.orderId}">
						<label for="userName">氏名</label>
						<input th:field="*{userName}" th:value="${param.userName}">
						<label for="orderDate">注文日付</label>
						<input th:field="*{orderDate}" th:value="${param.orderDate}">
						<input type="submit" value="検索" class="btn">
					</div>
				</form>
				<!--注文情報がないときのメッセージ表示-->
				<div th:if="${#lists.isEmpty(order_list)}">
					<p>注文情報がありません</p>
				</div>
				<!--注文一覧表示-->
				<table border="1" th:if="!${#lists.isEmpty(order_list)}">
					<thead>
					<tr>
						<th>注文ID</th>
						<th>氏名</th>
						<th>注文日付</th>
						<th>住所</th>
						<th>注文内容</th>
						<th>操作</th>
					</tr>
					</thead>
					<tbody>
					<tr th:each="order : ${order_list}">
						<form th:action="@{/empOrder/update}" method="post">
							<!--注文ID欄-->
							<td th:text="${order.orderId}"></td>
							<!--氏名欄-->
							<td th:text="${order.userName}"></td>
							<!--注文日付欄-->
							<td th:text="${#dates.format(order.orderDate, 'yyyy/MM/dd')}"></td>
							<!--住所欄-->
							<td>
								<input type="hidden" name="orderId" th:value="${order.orderId}">
								<input type="text" name="address" th:value="${order.address}">
							</td>
							<!--注文内容欄-->
							<td>
								<span th:each="detail : ${order.order_details}">
									<span th:text="${detail.itemCd}"></span>×
									<span th:text="${detail.quantity}"></span>個<br>
								</span>
							</td>
							<!--操作欄-->
							<td>
								<input type="submit" value="変更" class="btn">
							</td>
						</form>
						<form th:action="@{/empOrder/cancel}" method="post" onsubmit="return confirm('本当に取り消しますか？');">
							<input type="hidden" name="orderId" th:value="${order.orderId}">
								<td>
									<input type="submit" value="注文取消" class="btn">
								</td>
						</form>
					</tr>
					</tbody>
				</table>
			</div>
			
		
		</main>
		<footer>フッターhtml作成して読み込む</footer>
	</div>
</body>
</html>